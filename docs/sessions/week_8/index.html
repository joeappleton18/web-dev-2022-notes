<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Week 8 - Firebase Authentication and  Custom Hooks</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/web-dev-2021-notes/assets/css/0.styles.004f33d5.css" as="style"><link rel="preload" href="/web-dev-2021-notes/assets/js/app.b62daabf.js" as="script"><link rel="preload" href="/web-dev-2021-notes/assets/js/3.f96eb441.js" as="script"><link rel="preload" href="/web-dev-2021-notes/assets/js/11.f499a37e.js" as="script"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/1.3e960adf.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/10.87091a6c.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/12.acf6d6ac.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/13.6545259e.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/14.8a7cd17e.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/15.d8d056c3.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/16.3735eb4f.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/17.8f0d89a9.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/18.a5a8fc92.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/19.ff8e6d1e.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/20.a8938e17.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/21.5433a7d9.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/22.a40ffd53.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/23.5fda8a38.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/24.e73eab11.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/25.7ea10a78.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/26.4e3b4bab.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/27.148cecca.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/28.499ef4f0.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/4.83789471.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/5.87c03544.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/6.7b308207.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/7.5bd6664d.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/8.bdbe5d9d.js"><link rel="prefetch" href="/web-dev-2021-notes/assets/js/9.15ecbafb.js">
    <link rel="stylesheet" href="/web-dev-2021-notes/assets/css/0.styles.004f33d5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/web-dev-2021-notes/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Overview</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/web-dev-2021-notes/" aria-current="page" class="sidebar-link">Course Overview</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-dev-2021-notes/#teaching-strategy" class="sidebar-link">Teaching Strategy</a></li><li class="sidebar-sub-header"><a href="/web-dev-2021-notes/#technologies-we-will-be-using" class="sidebar-link">Technologies we will be using:</a></li><li class="sidebar-sub-header"><a href="/web-dev-2021-notes/#how-you-will-be-assessed" class="sidebar-link">How you will be assessed</a></li><li class="sidebar-sub-header"><a href="/web-dev-2021-notes/#weekly-topics" class="sidebar-link">Weekly Topics</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Assessments</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 1 - The latest version of JavaScript</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="week-8-firebase-authentication-and-custom-hooks"><a href="#week-8-firebase-authentication-and-custom-hooks" class="header-anchor">#</a> Week 8 - Firebase Authentication and  Custom Hooks</h1> <p>This week, for me, is the most exciting session to deliver. I going to be introducing you to the wonderful, time and cost saving world, of serverless systems. In doing so, we are going to be using a authentication service offered by Firebase . This will allow users to sign up and log into our application. Crucially, we will now be able to lock sections of our application down. We'll be answering the following question:</p> <p><strong>How can I authenticate my react applications allowing users to sign in using a range of different methods (facebook, email, gmail)?</strong></p> <p>This week, <strong>I encourage you to follow through the video which will guid in the process of connecting react up to third party serverless providers</strong>.  <strong>It's long</strong>, and I don't expect you to complete this video in one sitting. Ensure you use the notes to support you, when you are watching the video.</p> <iframe src="https://solent.cloud.panopto.eu/Panopto/Pages/Embed.aspx?id=bf80fe40-5746-4bd9-8abc-ac7a00d594c0&amp;autoplay=false&amp;offerviewer=true&amp;showtitle=true&amp;showbrand=false&amp;start=0&amp;interactivity=all" height="405" width="720" allowfullscreen="allowfullscreen" allow="autoplay" style="border:1px solid #464646;"></iframe> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <h2 id="session-dependencies"><a href="#session-dependencies" class="header-anchor">#</a> Session Dependencies</h2> <p><a href="http://github.com/joeappleton18/contemp-web-app-solutions.git" target="_blank" rel="noopener noreferrer">Make sure that you have the latest of the ongoing class, fitness tracker, project. <strong>The notes for this week refer extensively to this project</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <h3 id="essential-reading"><a href="#essential-reading" class="header-anchor">#</a> Essential Reading üìï</h3> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p><a href="https://reactjs.org/docs/hooks-custom.html#using-a-custom-hook" target="_blank" rel="noopener noreferrer">Creating React Hooks Custom Hooks<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://firebase.google.com/docs/auth/web/start" target="_blank" rel="noopener noreferrer">Firebase Authentication<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <h2 id="firebase"><a href="#firebase" class="header-anchor">#</a> Firebase</h2> <p><a href="https://firebase.google.com/docs" target="_blank" rel="noopener noreferrer">Firebase<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is a cloud infrastructure service that was acquired by Google in 2015 - it effectively is a sub-product suite of the <a href="https://cloud.google.com/" target="_blank" rel="noopener noreferrer">cloud platform<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. At the time of writing, firebase offers a range of web-enabled services, the most popular being:</p> <ul><li>Authentication</li> <li>The Cloud Firestore Database</li> <li>Cloud Functions</li> <li>Hosting</li></ul> <p>Firebase, and other infrastructure as a service platform, delegate the need to manage infrastructure away from the developer. This is particularly appealing if you are working in a small team, or, as a solo developer. What's more, for our use, it has a very generous free tier.</p> <h2 id="getting-started"><a href="#getting-started" class="header-anchor">#</a> Getting Started</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <h2 id="task-1-setting-up-firebase"><a href="#task-1-setting-up-firebase" class="header-anchor">#</a> Task 1 - Setting Up Firebase</h2> <p>The purpose of this task is simply to set up a firebase account, create a project and register your first application - it is much easier than it sounds.</p> <ol><li><p><a href="https://firebase.google.com/" target="_blank" rel="noopener noreferrer">Create a Firebase Account <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>Next, create a project and name it whatever you like</p></li></ol> <p><img src="/web-dev-2021-notes/assets/img/fig_1.447b1f3b.png" alt="fig_1"></p> <ol start="3"><li><p>Within your project, register a new web application, register a new web application, also name it what you like</p></li> <li><p>Finally, within our weekly web project, install the firebase library by running:  <code>npm install firebase</code></p></li></ol></div> <h2 id="setting-up-third-party-services-in-react"><a href="#setting-up-third-party-services-in-react" class="header-anchor">#</a> Setting Up Third Party Services in React</h2> <p>Remember, React is just a light layer of UI functionality sprinkled on top of JavaScript. As such, we can structure our apps in the way we want - this is both a blessing and a curse. While we have free range on our app's architecture, things can get messy - very quickly.  This is why we need to be strict on enforcing conventions (e.g. component names must have  uppercase first letter). It keeps things sane as our app grows. With this in mind, I like to create, what I refer to as services to handle interactions with third-party apis/services such as firebase.</p> <h3 id="setting-up-a-firebase-service"><a href="#setting-up-a-firebase-service" class="header-anchor">#</a> Setting Up a Firebase Service</h3> <p>Before we can set up our firebase service we need to export a configuration object that identifies our firebase project.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <h2 id="task-2-setting-up-a-firebase-config-file"><a href="#task-2-setting-up-a-firebase-config-file" class="header-anchor">#</a> Task 2 - Setting Up a Firebase Config File</h2> <ul><li><p>Create the file <code>src/config/firebase.js</code></p> <p><img src="data:image/png;base64,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" alt="fig_2"></p></li> <li><p>Next, access your firebase project settings  by clicking on the cog on the top left of the project area Scroll down and find your apps specific configuration object.</p></li> <li><p>Finally, place it <code>src/config/firebase.js</code> as a <code>const</code> and export it. Here is what mine looks like:</p></li></ul> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> firebaseConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
    apiKey<span class="token operator">:</span> <span class="token string">&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;</span><span class="token punctuation">,</span>
    authDomain<span class="token operator">:</span> <span class="token string">&quot;web-dev-practical.firebaseapp.com&quot;</span><span class="token punctuation">,</span>
    databaseURL<span class="token operator">:</span> <span class="token string">&quot;https://web-dev-practical.firebaseio.com&quot;</span><span class="token punctuation">,</span>
    projectId<span class="token operator">:</span> <span class="token string">&quot;web-dev-practical&quot;</span><span class="token punctuation">,</span>
    storageBucket<span class="token operator">:</span> <span class="token string">&quot;web-dev-practical.appspot.com&quot;</span><span class="token punctuation">,</span>
    messagingSenderId<span class="token operator">:</span> <span class="token string">&quot;1030945380946&quot;</span><span class="token punctuation">,</span>
    appId<span class="token operator">:</span> <span class="token string">&quot;1:1030945380946:web:ae1bca104338f617df9d8b&quot;</span><span class="token punctuation">,</span>
    measurementId<span class="token operator">:</span> <span class="token string">&quot;G-321SW2SPSG&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> firebaseConfig<span class="token punctuation">;</span>
</code></pre></div></div> <h2 id="creating-custom-hooks"><a href="#creating-custom-hooks" class="header-anchor">#</a> Creating Custom Hooks</h2> <p>You have already seen and used Hooks; according to the React documentation:</p> <blockquote><blockquote><p><a href="https://reactjs.org/docs/hooks-custom.html#using-a-custom-hook" target="_blank" rel="noopener noreferrer"><em>Hooks</em> are a new addition in React 16.8. They let you use state and other React features without writing a class<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></blockquote></blockquote> <p>React Hooks such as useSate and useEffect allow us to share logic between components without the need to write a class. Along this line of thinking, creating our own custom hooks can allow us to share logic that we have created - perfect for capturing third party service communication.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <h2 id="task-3"><a href="#task-3" class="header-anchor">#</a> Task 3</h2> <p>According to React:</p> <blockquote><blockquote><p><a href="https://reactjs.org/docs/hooks-custom.html#using-a-custom-hook" target="_blank" rel="noopener noreferrer"><strong>A custom Hook is a JavaScript function whose name starts with ‚Äùuse‚Äù and that may call other Hooks</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></blockquote> <p>Let's create a hook that handles firebase authentication.</p> <ul><li>Following the above naming convention, create the  file:  <code>src/services/firebase/useAuth.js</code></li> <li>Add the following code:</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useState<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">useAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">const</span> <span class="token punctuation">[</span>isAuthenticated<span class="token punctuation">,</span> setIsAuthenticated<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token punctuation">{</span>isAuthenticated<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> useAuth
</code></pre></div><ul><li><p>That's it, you've just created your first hook. It's small at the moment, we'll flesh it out later</p></li> <li><p>Let's consider what we are doing above.</p> <ul><li>You should already know that we are setting the state <code>isAuthenticated</code> to a default value of  false: <code>const [isAuthenticated, setIsAuthenticated] = useState(false);</code></li> <li>You may, however, not know exactly what <code>return {isAuthenticated};</code>. It is not JSX, remember a hook is essentially a function,  <a href="https://alligator.io/js/object-property-shorthand-es6/" target="_blank" rel="noopener noreferrer">I am simply using shorthand property names<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to return an object.  <code>{isAuthenticated}</code> is the same as {isAuthenticated : isAuthenticated }</li></ul></li> <li><p>Let's use the hook</p> <ul><li><p>First, import it into <code>src/App.js</code>   -  <code>import useAuth from &quot;./services/firebase/useAuth&quot;;</code></p></li> <li><p>We can then use object destructuring to invoke the function and grab the <code>isAuthenticated</code> state</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">.</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> isAuthenticated <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token operator">...</span><span class="token punctuation">.</span>      
</code></pre></div></li></ul></li></ul></div> <p>How might we use the above hook, all it currently does is return to us that given user is not authenticated. This, however, is all we need to lock down routes that are only accessible to logged-in users.  To achieve this, we need to consider how to set up protected routes. A protected route will redirect to the login page if a user is not logged in. <a href="https://reacttraining.com/react-router/web/example/auth-workflow" target="_blank" rel="noopener noreferrer">The React Router Documentation suggests that we can create the following wrapper componet to protect routes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">Protected</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> authenticated<span class="token punctuation">,</span> children<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Route
      <span class="token punctuation">{</span><span class="token operator">...</span>rest<span class="token punctuation">}</span>
      render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> location <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        authenticated <span class="token operator">?</span> <span class="token punctuation">(</span>
          children
        <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Redirect</span></span>
            <span class="token attr-name">to</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
              pathname<span class="token operator">:</span> <span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span>
              state<span class="token operator">:</span> <span class="token punctuation">{</span> from<span class="token operator">:</span> location <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
          <span class="token punctuation">/&gt;</span></span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>After pasting in the above code you will need to make sure that you import the redirect component at the top of App.js - <code>import { Switch, Route, useLocation, Redirect } from &quot;react-router-dom&quot;;</code></li></ul> <p>The above component is similar to our <code>src/Tile.js</code> component, in that it wraps around some child component. However, it has a bit more logic, can you see how it is checking if authenticated is true? If this is the case the wrapped component is rendered, if not, we redirect to login. The router uses render props to achieve this, like hooks, render props are used to share logic. Once the above component is set up we can wrap it around our protected routes:</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Protected</span></span> <span class="token attr-name">authenticated</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>isAuthenticated <span class="token punctuation">}</span></span> <span class="token attr-name">exact</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Dash</span></span> <span class="token attr-name">checkins</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>checkins<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Protected</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <h2 id="task-4"><a href="#task-4" class="header-anchor">#</a> Task 4</h2> <p>Using the notes above, lock your application down. Login and Sign up should be the only accessible pages for unauthenticated users</p></div> <h2 id="integrating-a-hook-with-firebase"><a href="#integrating-a-hook-with-firebase" class="header-anchor">#</a> Integrating a hook with Firebase</h2> <p>Setting up firebase in our project is fairly straightforward. First, we need to import our dependencies, usually, you would do this in the highest level component src/App.js:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> firebase <span class="token keyword">from</span> <span class="token string">&quot;firebase/app&quot;</span><span class="token punctuation">;</span>   <span class="token comment">// the firbase core lib</span>
<span class="token keyword">import</span> <span class="token string">'firebase/auth'</span><span class="token punctuation">;</span> <span class="token comment">// specific products</span>
<span class="token keyword">import</span> firebaseConfig <span class="token keyword">from</span> <span class="token string">&quot;./config/firebase&quot;</span><span class="token punctuation">;</span>  <span class="token comment">// the firebase config we set up ealier</span>
</code></pre></div><p>Next, at the top of  our <code>App</code> component, we can initiate firebase:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>firebase<span class="token punctuation">.</span>apps<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    firebase<span class="token punctuation">.</span><span class="token function">initializeApp</span><span class="token punctuation">(</span>firebaseConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Notice how we use an if statement evaluating the <code>firebase.apps</code>, <code>firebase.apps</code> is an array that contains our initiated application. It can persist over page reloads, so above, I simply  check that we don't initiate firebase within our application more than once. If there is no app initiated, we then use the <code>initializeApp</code> method to set up our firebase application.  We can now use any, web enable , firebase product we like, <a href="https://firebase.google.com/docs/auth/web/start" target="_blank" rel="noopener noreferrer">however we are interested in authentication<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <h2 id="task-5"><a href="#task-5" class="header-anchor">#</a> Task 5</h2> <p>Using the techniques above, initiate firebase in your application</p></div> <h2 id="using-firebase-auth"><a href="#using-firebase-auth" class="header-anchor">#</a> Using Firebase Auth</h2> <h2 id="sign-up-new-users"><a href="#sign-up-new-users" class="header-anchor">#</a> Sign up new users</h2> <p>Ok, so we are now ready to authenticate users. The first thing we need to do is enable an authentication method within our firebase project. First, simply click authentication in the righthand side menu, and, for now, enable email authentication. That's it, we are now ready to authenticate and register users to our application.  Next, enable google authentication. Finally, follow the video below to enable facebook authentication:</p> <iframe width="560" height="315" src="https://www.youtube.com/embed/9ztk1hKmcI0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe> <p>Recall that we have initiated firebase within our app component. Once initiated, the<code>firebase</code> object will contain all of our authentication methods. These methods are returned by running an <code>auth()</code> method. For instance, we can do this:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>firebase<span class="token punctuation">.</span><span class="token function">auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createUserWithEmailAndPassword</span><span class="token punctuation">(</span><span class="token string">'joe.appleton@solent.ac.uk'</span><span class="token punctuation">,</span> <span class="token string">'password'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>We want to abstract this method to our useAuth hook. To do this we need to pass <code>firebase.auth()</code> into our useAuth hook. This means that the useAuth function call in our <code>src/App.js</code> component will look like this:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> isAuthenticated<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useAuth</span><span class="token punctuation">(</span>firebase<span class="token punctuation">.</span>auth<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>I can now abstract the email login functionality into useAuth, my <code>src/services/firebase/useAuth.js</code> hook looks like this:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useState<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>


<span class="token keyword">function</span> <span class="token function">useAuth</span><span class="token punctuation">(</span><span class="token parameter">fbAuth</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">const</span> <span class="token punctuation">[</span>isAuthenticated<span class="token punctuation">,</span> setIsAuthenticated<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">const</span> <span class="token function-variable function">createEmailUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">email<span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fbAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createUserWithEmailAndPassword</span><span class="token punctuation">(</span>email<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token punctuation">{</span>isAuthenticated<span class="token punctuation">,</span> createEmailUser<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> useAuth
</code></pre></div><p>We can get a reference to <code>createEmailUser</code> within our <code>src/App.js</code> component as follows:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> isAuthenticated<span class="token punctuation">,</span> createEmailUser<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useAuth</span><span class="token punctuation">(</span>firebase<span class="token punctuation">.</span>auth<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Within <code>src/App.js</code>  let's pass <code>createEmailUser</code> down  to our  <code>JoinPage</code>:</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/join<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Join</span></span> <span class="token attr-name">createEmailUser</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>createEmailUser<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
 </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Route</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>We can now use  createEmailUser within our <code>src/Components/Join.js</code> component as follows:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Join</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>severErrorMessage<span class="token punctuation">,</span> setServerErrorMessage<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>createEmailUser<span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleEmailSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span>email<span class="token punctuation">,</span> password<span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>
        <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">createEmailUser</span><span class="token punctuation">(</span>email<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setServerErrorMessage</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>StyledWrapper<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>StyledTile<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>StyledHeading<span class="token operator">&gt;</span>Get Started<span class="token operator">&lt;</span><span class="token operator">/</span>StyledHeading<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>StyledHeading<span class="token operator">&gt;</span>Join With <span class="token operator">&lt;</span><span class="token operator">/</span>StyledHeading<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Form serverErrorMessage<span class="token operator">=</span><span class="token punctuation">{</span>severErrorMessage<span class="token punctuation">}</span> onEmailSubmit<span class="token operator">=</span><span class="token punctuation">{</span>handleEmailSubmit<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>StyledLink to<span class="token operator">=</span><span class="token string">&quot;/login&quot;</span><span class="token operator">&gt;</span> Already a member <span class="token operator">-</span> Login <span class="token operator">&lt;</span><span class="token operator">/</span>StyledLink<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>StyledTile<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>StyledWrapper<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Join<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
  createEmailUser<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">.</span>isRequired
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Join<span class="token punctuation">;</span>

</code></pre></div><p>**Note: **  you'll need to update our form component so it can process the new props we are passing in (serverErrorMessage - will get displayed below the form, onEmailSubmit will get called with the form data is submitted)`. Moreover, notice how I am using a async function (handleEmailSubmit).</p> <h2 id="sign-in-existing-users"><a href="#sign-in-existing-users" class="header-anchor">#</a> <a href="https://firebase.google.com/docs/auth/web/start#sign_in_existing_users" target="_blank" rel="noopener noreferrer">Sign in existing users<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p>To sign in existing users, we can use:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>firebase<span class="token punctuation">.</span><span class="token function">auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">signInWithEmailAndPassword</span><span class="token punctuation">(</span><span class="token string">'joe.appleton'</span><span class="token punctuation">,</span> <span class="token string">'password'</span><span class="token punctuation">)</span>
</code></pre></div><p>Let's abstract this functionality to our  <code>src/services/firebase/useAuth.js</code> hook:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">...</span>
<span class="token keyword">const</span> <span class="token function-variable function">signInEmailUser</span>  <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">email<span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fbAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">signInWithEmailAndPassword</span><span class="token punctuation">(</span>email<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token punctuation">{</span>isAuthenticated<span class="token punctuation">,</span> createEmailUser<span class="token punctuation">,</span> signInEmailUser <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
</code></pre></div><p>Within <code>src/App.js</code>  let's pass  <code>signInEmailUser</code> down  to our  <code>LoginPage</code>:</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/login<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
       </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Login</span></span> <span class="token attr-name">signInEmailUser</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>signInEmailUser<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Route</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>We can now use <code>signInEmailUser</code> within our <code>LoginPage</code>:</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Login</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span>signInEmailUser<span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>serverErrorMessage<span class="token punctuation">,</span> setServerErrorMessage<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleEmailSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span>email<span class="token punctuation">,</span> password<span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>
        <span class="token keyword">await</span> <span class="token function">signInEmailUser</span><span class="token punctuation">(</span>email<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token function">setServerErrorMessage</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>StyledWrapper<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>StyledTile<span class="token operator">&gt;</span>
  
        <span class="token operator">&lt;</span>StyledHeading<span class="token operator">&gt;</span>Login With <span class="token operator">&lt;</span><span class="token operator">/</span>StyledHeading<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Form  onEmailSubmit<span class="token operator">=</span><span class="token punctuation">{</span>handleEmailSubmit<span class="token punctuation">}</span> serverErrorMessage<span class="token operator">=</span><span class="token punctuation">{</span>serverErrorMessage<span class="token punctuation">}</span> buttonText<span class="token operator">=</span><span class="token string">&quot;LOGIN&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>StyledLink to<span class="token operator">=</span><span class="token string">&quot;/join&quot;</span><span class="token operator">&gt;</span> Not a member <span class="token operator">-</span> Join <span class="token operator">&lt;</span><span class="token operator">/</span>StyledLink<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>StyledTile<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>StyledWrapper<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Login<span class="token punctuation">.</span>propTypes  <span class="token operator">=</span> <span class="token punctuation">{</span>
  signInEmailUser<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">.</span>isRequired
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Login<span class="token punctuation">;</span>
</code></pre></div><h2 id="set-an-authentication-state-observer"><a href="#set-an-authentication-state-observer" class="header-anchor">#</a> <a href="https://firebase.google.com/docs/auth/web/start#set_an_authentication_state_observer_and_get_user_data" target="_blank" rel="noopener noreferrer">Set an authentication state observer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p>We can now request that firebase informs us when a user logs in or out:</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>firebase<span class="token punctuation">.</span><span class="token function">auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onAuthStateChanged</span><span class="token punctuation">(</span><span class="token parameter">user</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">/** do something **/</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">/** they have logged out **/</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>We can use this in our <code>useAuth</code> hook as follows:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token function">fbAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onAuthStateChanged</span><span class="token punctuation">(</span><span class="token parameter">user</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setIsAuthenticated</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
      <span class="token function">setIsAuthenticated</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>We have a slight issue! Notice when you visit dash, your application at this stage will be authenticating however we still get redirected to the login page when we try and visit our root url. This is because our redirect fires before our application authenticates. In order to fix this we need  a <code>useEffect</code> hook that listens to our <code>isAuthenticated</code> state and redirects the user to the dash when it changes to true. We can achieve this through adding the following function to our <code>App.js</code> - <code>App()</code> function:</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Switch<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> useLocation<span class="token punctuation">,</span> Redirect<span class="token punctuation">,</span> useHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">const</span> history <span class="token operator">=</span> <span class="token function">useHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token operator">...</span>
 
 <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isAuthenticated<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>isAuthenticated<span class="token punctuation">]</span><span class="token punctuation">)</span>

 <span class="token operator">...</span>

<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <h2 id="task-6"><a href="#task-6" class="header-anchor">#</a> Task 6</h2> <p>Follow the above steps to allow users to sign up and login to your application</p></div> <h2 id="further-study"><a href="#further-study" class="header-anchor">#</a> Further Study</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>** The video for this week covers these tasks! **</p> <h2 id="task-6-increasing-the-functionality"><a href="#task-6-increasing-the-functionality" class="header-anchor">#</a> Task 6 - Increasing the functionality</h2> <ul><li><p>Can you work out how to add the signed in user details to a user state in our useAuthHook. Next, share this around the application so the user name and an avatar or placeholder avatar (if there is not one) appear in the header.</p></li> <li><p>Can you use use <a href="https://www.npmjs.com/package/react-notifications" target="_blank" rel="noopener noreferrer">react notifications<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to provide better user feedback (inform them when they have logged in or out)</p></li> <li><p>Can you, in a similar way we did for protected routes, redirect the user to dash if they are logged in and navigate to the join or login page</p></li></ul></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <h2 id="task-8-add-social-sign-in"><a href="#task-8-add-social-sign-in" class="header-anchor">#</a> Task 8 - Add social sign in</h2> <ul><li>Set up social sign in methods (Facebook and Gmail)</li></ul></div></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/web-dev-2021-notes/assets/js/app.b62daabf.js" defer></script><script src="/web-dev-2021-notes/assets/js/3.f96eb441.js" defer></script><script src="/web-dev-2021-notes/assets/js/11.f499a37e.js" defer></script>
  </body>
</html>
